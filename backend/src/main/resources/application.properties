# Server Configuration
server.port=${PORT:8080}

# Database Configuration - Supabase PostgreSQL (Session Pooler)
# Prefer JDBC_DATABASE_URL in production to avoid accidentally passing a non-JDBC URL.
# Example: jdbc:postgresql://aws-1-ap-south-1.pooler.supabase.com:6543/postgres?sslmode=require&connectTimeout=30&socketTimeout=60&tcpKeepAlive=true&preferQueryMode=simple
# Note: 6543 is commonly the Supabase pooler port. If you are using a session-pooler endpoint/port, override via JDBC_DATABASE_URL.
spring.datasource.url=${JDBC_DATABASE_URL:${DATABASE_URL:jdbc:postgresql://aws-1-ap-south-1.pooler.supabase.com:6543/postgres?sslmode=require&connectTimeout=30&socketTimeout=60&tcpKeepAlive=true&preferQueryMode=simple}}
spring.datasource.username=${DB_USERNAME:postgres.thcfrsehlyxrpwvmwcdy}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Configuration - Optimized for Supabase Pooler
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.keepalive-time=240000

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# JWT Configuration
# For production, always set JWT_SECRET via environment variable.
jwt.secret=${JWT_SECRET:dev-insecure-change-me}
jwt.expiration=86400000

# CORS Configuration
# Supports wildcard patterns (e.g. https://*.vercel.app)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,https://medi-mitra-omega.vercel.app,https://*.vercel.app}

# Logging
logging.level.com.medimitra=DEBUG
logging.level.org.hibernate.SQL=DEBUG
